import { addressbook } from "./constants";
import { testRawTx, testTx } from "./tools";

const method = 'executeOrder(((address,uint256)[],(address,uint256)[],address,uint32,uint32),(address,address,bytes,int32)[],uint256,address)';
const title = '_known_to_known'
// Test from replayed transaction:
// https://etherscan.io/getRawTx?tx=0x8886d7f00fee7c3f124eaac00fe71e162bc65420d5fd755cc7c76e87eb540389

const rawTx = "0x02f90a5301468505f264be358505f264be358314ef05947fb69e8fb1525ceec03783ffd8a317bafbdfd39480b909e4916a3bd9000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000800e09ba737f4f462ef19ca370294af5b0a07ee30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000001571ed0bed4d987fe2b498ddbae7dfa19519f65100000000000000000000000000000000000000000000000020f93606244ece7f00000000000000000000000000000000000000000000000000000000000000010000000000000000000000009992ec3cf6a55b00978cddf2b27bc6882d88d1ec0000000000000000000000000000000000000000000000226c35ff58ccac00000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000001200000000000000000000000001571ed0bed4d987fe2b498ddbae7dfa19519f6510000000000000000000000001571ed0bed4d987fe2b498ddbae7dfa19519f6510000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000242e1a7d4d000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000a0246c9032bc3a600820415ae600c6388619a14d000000000000000000000000def1c0ded9bec7f1a1670819833240f027b25eff0000000000000000000000000000000000000000000000000000000000000080ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000604415565b0000000000000000000000000a0246c9032bc3a600820415ae600c6388619a14d0000000000000000000000009992ec3cf6a55b00978cddf2b27bc6882d88d1ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000036000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0246c9032bc3a600820415ae600c6388619a14d0000000000000000000000009992ec3cf6a55b00978cddf2b27bc6882d88d1ec00000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000320000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000002e0ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000002556e697377617056320000000000000000000000000000000000000000000000000000000000000030110659947dc400000000000000000000000000000000000000000000000022987e4f1a35e4bd58000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000f164fc0ec4e93095b804a4795bbe1e041497b92a00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000003000000000000000000000000a0246c9032bc3a600820415ae600c6388619a14d000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000009992ec3cf6a55b00978cddf2b27bc6882d88d1ec000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000a0246c9032bc3a600820415ae600c6388619a14d000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c080a04ebaad2476d0e14bbd99ba19b8b29ac08bad2181437b4b8635b24d2f30401629a016877164d200da2cb323db6563bcd8b08b90297d5953cfcc5134ffa12b0ebc5f";
testRawTx(title, method, rawTx, 11, 5);

const params = [
    [[['0x1571eD0bed4D987fe2b498DdBaE7DFA19519F651', '2375989678421495423']],
    [['0x9992eC3cF6A55b00978cdDF2b27BC6882d88D1eC', '634986717592842665984']],
        '0x800e09bA737f4F462ef19ca370294af5B0A07ee3',
        0,
        0],
    [['0x1571eD0bed4D987fe2b498DdBaE7DFA19519F651', '0x1571eD0bed4D987fe2b498DdBaE7DFA19519F651', '0x2e1a7d4d0000000000000000000000000000000000000000000000000000000000000001', 4],
    ['0xa0246c9032bC3A600820415aE600c6388619A14D', '0xDef1C0ded9bec7F1a1670819833240f027b25EfF', '0x415565b0000000000000000000000000a0246c9032bc3a600820415ae600c6388619a14d0000000000000000000000009992ec3cf6a55b00978cddf2b27bc6882d88d1ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000036000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0246c9032bc3a600820415ae600c6388619a14d0000000000000000000000009992ec3cf6a55b00978cddf2b27bc6882d88d1ec00000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000320000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000002e0ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000002556e697377617056320000000000000000000000000000000000000000000000000000000000000030110659947dc400000000000000000000000000000000000000000000000022987e4f1a35e4bd58000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000f164fc0ec4e93095b804a4795bbe1e041497b92a00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000003000000000000000000000000a0246c9032bc3a600820415ae600c6388619a14d000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000009992ec3cf6a55b00978cddf2b27bc6882d88d1ec000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000a0246c9032bc3a600820415ae600c6388619a14d000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000', -1]
    ],
    0,
    '0x0000000000000000000000000000000000000000'
]

// Test constructed tx
const abi = require('../harvest/abis/wido_router.abi.json');
testTx(title, addressbook.WIDO_ROUTER, abi, method, params, 9, 5);