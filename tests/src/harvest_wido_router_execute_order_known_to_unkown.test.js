import { addressbook } from "./constants";
import { testRawTx, testTx } from "./tools";

const method = 'executeOrder(((address,uint256)[],(address,uint256)[],address,uint32,uint32),(address,address,bytes,int32)[],uint256,address)';
const title = '_known_to_unknown'
// Test from replayed transaction:
// https://etherscan.io/getRawTx?tx=0x422f8660e4694989801293350e91f40c3e245d4787d1f4f490adb43859362201

const rawTx = "0x02f90372010184059a53808505ba16b7ba8303d01e947fb69e8fb1525ceec03783ffd8a317bafbdfd39480b90304916a3bd9000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000001e0000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001000000000000000000000000003acaf50e05e68cc2efddd73315c6c09a1034bb2a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4800000000000000000000000000000000000000000000000000000000118341be0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000f62a24ebe766d0da04c9e2aeecd5e86fac049b7b000000000000000000000000000000000000000000000000000000001115b1a800000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000f62a24ebe766d0da04c9e2aeecd5e86fac049b7b000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000024b6b55f25000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000c001a0047c71025a1b8274a88dbf0a52dcd4553e47071462242fa2e92137b9d114c228a05a86a4b5d2f7e50d415626225ed1f8428d519b78f956363afe6508ce0d329c36";
testRawTx(title, method, rawTx, 10, 6);

const params = [
    [[['0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', '293814718']],
    [['0xf62A24EbE766d0dA04C9e2aeeCd5E86Fac049B7B', '286634408']],
        '0x3aCaf50E05e68CC2eFdDD73315c6c09A1034BB2A',
        0,
        0],
    [['0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', '0xf62A24EbE766d0dA04C9e2aeeCd5E86Fac049B7B', '0xb6b55f250000000000000000000000000000000000000000000000000000000000000001', 4]],
    30,
    '0x0000000000000000000000000000000000000000'
]

// Test constructed tx
const abi = require('../harvest/abis/wido_router.abi.json');
testTx(title, addressbook.WIDO_ROUTER, abi, method, params, 8, 6);